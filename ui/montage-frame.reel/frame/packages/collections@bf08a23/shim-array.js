"use strict";function define(t,e){Object.defineProperty(Array.prototype,t,{value:e,writable:!0,configurable:!0,enumerable:!1})}function ArrayIterator(t,e,n){this.array=t,this.start=null==e?0:e,this.end=n}var Function=require("./shim-function"),GenericCollection=require("./generic-collection"),GenericOrder=require("./generic-order"),WeakMap=require("weak-map");module.exports=Array,Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=function(t){var e=[];return e.addEach(t),e},Array.unzip=function(t){for(var e=[],n=1/0,i=0;t.length>i;i++){var a=t[i];t[i]=a.toArray(),n>a.length&&(n=a.length)}for(var i=0;t.length>i;i++)for(var a=t[i],r=0;a.length>r;r++)n>r&&r in a&&(e[r]=e[r]||[],e[r][i]=a[r]);return e},define("addEach",GenericCollection.prototype.addEach),define("deleteEach",GenericCollection.prototype.deleteEach),define("toArray",GenericCollection.prototype.toArray),define("toObject",GenericCollection.prototype.toObject),define("all",GenericCollection.prototype.all),define("any",GenericCollection.prototype.any),define("min",GenericCollection.prototype.min),define("max",GenericCollection.prototype.max),define("sum",GenericCollection.prototype.sum),define("average",GenericCollection.prototype.average),define("only",GenericCollection.prototype.only),define("flatten",GenericCollection.prototype.flatten),define("zip",GenericCollection.prototype.zip),define("enumerate",GenericCollection.prototype.enumerate),define("group",GenericCollection.prototype.group),define("sorted",GenericCollection.prototype.sorted),define("reversed",GenericCollection.prototype.reversed),define("constructClone",function(t){var e=new this.constructor;return e.addEach(t),e}),define("has",function(t,e){return-1!==this.find(t,e)}),define("get",function(t,e){if(+t!==t)throw Error("Indicies must be numbers");return!t in this?e:this[t]}),define("set",function(t,e){return this.splice(t,1,e),!0}),define("add",function(t){return this.push(t),!0}),define("delete",function(t,e){var n=this.find(t,e);return-1!==n?(this.splice(n,1),!0):!1}),define("find",function(t,e){e=e||this.contentEquals||Object.equals;for(var n=0;this.length>n;n++)if(n in this&&e(this[n],t))return n;return-1}),define("findLast",function(t,e){e=e||this.contentEquals||Object.equals;var n=this.length;do if(n--,n in this&&e(this[n],t))return n;while(n>0);return-1}),define("swap",function(t,e,n){var i=Array.prototype.slice.call(arguments,0,2);return n&&(Array.isArray(n)||(n=Array.prototype.slice.call(n)),i.push.apply(i,n)),this.splice.apply(this,i)}),define("one",function(){for(var t in this)if(Object.owns(this,t))return this[t]}),define("clear",function(){return this.length=0,this}),define("compare",function(t,e){e=e||Object.compare;var n,i,a,r,s;if(this===t)return 0;if(!t||!Array.isArray(t))return GenericOrder.prototype.compare.call(this,t,e);for(i=Math.min(this.length,t.length),n=0;i>n;n++)if(n in this){if(!(n in t))return-1;if(a=this[n],r=t[n],s=e(a,r))return s}else if(n in t)return 1;return this.length-t.length}),define("equals",function(t,e){e=e||Object.equals;var n,i,a=0,r=this.length;if(this===t)return!0;if(!t||!Array.isArray(t))return GenericOrder.prototype.equals.call(this,t);if(r!==t.length)return!1;for(;r>a;++a)if(a in this){if(!(a in t))return!1;if(n=this[a],i=t[a],!e(n,i))return!1}else if(a in t)return!1;return!0}),define("clone",function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;e=e||new WeakMap;var n=[];for(var i in this)Object.owns(this,i)&&(n[i]=Object.clone(this[i],t-1,e));return n}),define("iterate",function(t,e){return new ArrayIterator(this,t,e)}),define("Iterator",ArrayIterator),ArrayIterator.prototype.next=function(){if(this.start===(null==this.end?this.array.length:this.end))throw StopIteration;return this.array[this.start++]};