montageDefine("bf08a23","heap",{dependencies:["./listen/array-changes","./shim","./generic-collection","./listen/map-changes","./listen/range-changes","./listen/property-changes"],factory:function(t,e,n){function i(t,e,n){return this instanceof i?(this.contentEquals=e||Object.equals,this.contentCompare=n||Object.compare,this.content=[],this.length=0,this.addEach(t),void 0):new i(t,e,n)}t("./listen/array-changes"),t("./shim");var a=t("./generic-collection"),r=t("./listen/map-changes"),s=t("./listen/range-changes"),o=t("./listen/property-changes");n.exports=i,Object.addEach(i.prototype,a.prototype),Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,r.prototype),i.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentCompare)},i.prototype.push=function(t){this.content.push(t),this.float(this.content.length-1),this.length++},i.prototype.pop=function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content.set(0,e),this.sink(0)),this.length--,t},i.prototype.add=function(t){this.push(t)},i.prototype.indexOf=function(t){for(var e=0;this.length>e;e++)if(this.contentEquals(this.content[e],t))return e;return-1},i.prototype.delete=function(t){var e=this.indexOf(t);if(-1===e)return!1;var n=this.content.pop();if(e===this.content.length)return!0;this.content.set(e,n);var i=this.contentCompare(n,t);return i>0?this.float(e):0>i&&this.sink(e),this.length--,!0},i.prototype.peek=function(){return this.length?this.content[0]:void 0},i.prototype.max=function(){return this.peek()},i.prototype.one=function(){return this.peek()},i.prototype.float=function(t){for(var e=this.content[t];t>0;){var n=Math.floor((t+1)/2)-1,i=this.content[n];if(!(0>this.contentCompare(i,e)))break;this.content.set(n,e),this.content.set(t,i),t=n}},i.prototype.sink=function(t){for(var e,n,i,a,r,s,o=this.content.length,l=this.content[t];;){if(a=2*(t+1),i=a-1,s=!1,o>i){var e=this.content[i],c=this.contentCompare(e,l);c>0&&(r=i,s=!0)}if(o>a){var n=this.content[a],c=this.contentCompare(n,s?e:l);c>0&&(r=a,s=!0)}if(!s)break;this.content.set(t,this.content[r]),this.content.set(r,l),t=r}},i.prototype.clear=function(){this.content.clear(),this.length=0},i.prototype.reduce=function(t,e){var n=arguments[2];return this.content.reduce(function(e,i,a){return t.call(n,e,i,a,this)},e,this)},i.prototype.reduceRight=function(){var t=arguments[2];return this.content.reduceRight(function(e,n,i){return callback.call(t,e,n,i,this)},basis,this)},i.prototype.makeObservable=function(){this.content.addRangeChangeListener(this,"content"),this.content.addBeforeRangeChangeListener(this,"content"),this.content.addMapChangeListener(this,"content"),this.content.addBeforeMapChangeListener(this,"content")},i.prototype.handleContentRangeChange=function(t,e,n){this.dispatchRangeChange(t,e,n)},i.prototype.handleContentRangeWillChange=function(t,e,n){this.dispatchBeforeRangeChange(t,e,n)},i.prototype.handleContentMapChange=function(t,e){this.dispatchMapChange(e,t)},i.prototype.handleContentMapWillChange=function(t,e){this.dispatchBeforeMapChange(e,t)}}});