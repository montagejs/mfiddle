var Promise=require("q");(function(t){function e(t,e,n){if(this._reviver=e,this._serialization=t,this._objects=Object.create(null),n){this._userObjects=Object.create(null);for(var i in n)this._userObjects[i]=n[i]}}Object.defineProperties(e.prototype,{_objects:{value:null,writable:!0},_userObjects:{value:null,writable:!0},_serialization:{value:null,writable:!0},_reviver:{value:null,writable:!0},setObjectLabel:{value:function(t,e){this._objects[e]=t}},getObject:{value:function(t){var e,n=this._serialization,i=this._reviver,a=this._objects;return t in a?a[t]:t in n?(e=i.reviveRootObject(n[t],this,t),t in a||(a[t]=e),e):Promise.reject(Error("Object with label '"+t+"' was not found."))}},getObjects:{value:function(){var t,e=this,n=(this._reviver,this._serialization),i=[];for(var a in n)t=this.getObject(a),Promise.isPromise(t)&&i.push(t);return 0===i.length?Promise.resolve(this._invokeDidReviveObjects()):Promise.all(i).then(function(){return e._invokeDidReviveObjects()})}},hasUserObject:{value:function(t){var e=this._userObjects;return e?t in e:!1}},getUserObject:{value:function(t){var e=this._userObjects;return e?e[t]:void 0}},_invokeDidReviveObjects:{value:function(){var t,e=this,n=this._reviver;return"function"==typeof n.didReviveObjects&&(t=n.didReviveObjects(this._objects,this),Promise.isPromise(t))?t.then(function(){return e._objects}):this._objects}}}),t.Context=e})(exports);