montageDefine("0d641c0","deserialization/context",{dependencies:["q"],factory:function(t,e){var n=t("q");(function(t){function e(t,e,n){if(this._reviver=e,this._serialization=t,this._objects=Object.create(null),n){this._userObjects=Object.create(null);for(var i in n)this._userObjects[i]=n[i]}}Object.defineProperties(e.prototype,{_objects:{value:null,writable:!0},_userObjects:{value:null,writable:!0},_serialization:{value:null,writable:!0},_reviver:{value:null,writable:!0},setObjectLabel:{value:function(t,e){this._objects[e]=t}},getObject:{value:function(t){var e,i=this._serialization,a=this._reviver,r=this._objects;return t in r?r[t]:t in i?(e=a.reviveRootObject(i[t],this,t),t in r||(r[t]=e),e):n.reject(Error("Object with label '"+t+"' was not found."))}},getObjects:{value:function(){var t,e=this,i=(this._reviver,this._serialization),a=[];for(var r in i)t=this.getObject(r),n.isPromise(t)&&a.push(t);return 0===a.length?n.resolve(this._invokeDidReviveObjects()):n.all(a).then(function(){return e._invokeDidReviveObjects()})}},hasUserObject:{value:function(t){var e=this._userObjects;return e?t in e:!1}},getUserObject:{value:function(t){var e=this._userObjects;return e?e[t]:void 0}},_invokeDidReviveObjects:{value:function(){var t,e=this,i=this._reviver;return"function"==typeof i.didReviveObjects&&(t=i.didReviveObjects(this._objects,this),n.isPromise(t))?t.then(function(){return e._objects}):this._objects}}}),t.Context=e})(e)}});