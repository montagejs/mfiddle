montageDefine("7892c9a","fs",{dependencies:["util","path","stream","events","./lib/_stream_readable.js","./lib/_stream_writable.js"],factory:function(e,t){function n(){if(F){var e=Error();return function(t){if(t)throw e.message=t.message,t=e}}return function(e){if(e)throw e}}function i(e){return"function"==typeof e?e:n()}function r(e){return"function"!=typeof e?n():function(){return e.apply(null,arguments)}}function a(e){if(e&&!Buffer.isEncoding(e))throw Error("Unknown encoding: "+e)}function s(e,t){if(-1!==(""+e).indexOf("\0")){var n=Error("Path must be a string without null bytes.");if(!t)throw n;return process.nextTick(function(){t(n)}),!1}return!0}function o(e){if("string"!=typeof e)return e;if(!B&&~e.indexOf("x"))throw d("ENOSYS","fs.open(O_EXCL)");switch(e){case"r":return D;case"rs":return D|j;case"r+":return A;case"rs+":return A|j;case"w":return I|P|R;case"wx":case"xw":return I|P|R|B;case"w+":return I|P|A;case"wx+":case"xw+":return I|P|A|B;case"a":return O|P|R;case"ax":case"xa":return O|P|R|B;case"a+":return O|P|A;case"ax+":case"xa+":return O|P|A|B}throw Error("Unknown file open flag: "+e)}function l(e,t){switch(typeof e){case"number":return e;case"string":return parseInt(e,8);default:return t?l(t):void 0}}function c(e,t){return N?"junction"===t?_._makeLong(e):(""+e).replace(/\//g,"\\"):e}function u(e){if("number"==typeof e)return e;if(e instanceof Date)return e.getTime()/1e3;throw Error("Cannot parse time: "+e)}function h(e,t,n,r,a,s){s=i(arguments[arguments.length-1]),x.write(e,t,n,r,a,function(i,o){i?x.close(e,function(){s&&s(i)}):o===r?x.close(e,s):(n+=o,r-=o,a+=o,h(e,t,n,r,a,s))})}function d(e,t){var n=Error(t+" "+e);return n.errno=n.code=e,n.syscall=t,n}function p(){z.call(this);var e=this,t=process.binding("fs_event_wrap").FSEvent;this._handle=new t,this._handle.owner=this,this._handle.onchange=function(t,n,i){t?(e._handle.close(),e.emit("error",d(errno,"watch"))):e.emit("change",n,i)}}function g(){z.call(this);var e=this;this._handle=new C.StatWatcher;var t=-1;this._handle.onchange=function(n,i,r){(-1!==t||-1!==r||n.nlink!==i.nlink)&&(t=r,e.emit("change",n,i))},this._handle.onstop=function(){e.emit("stop")}}function m(e){return Object.prototype.hasOwnProperty.call(q,e)&&q[e]}function f(){H=new Buffer(T),H.used=0}function v(e,t){if(!(this instanceof v))return new v(e,t);if(t=L._extend({bufferSize:65536,lowWaterMark:16384,highWaterMark:65536},t||{}),S.call(this,t),this.path=e,this.fd=t.hasOwnProperty("fd")?t.fd:null,this.flags=t.hasOwnProperty("flags")?t.flags:"r",this.mode=t.hasOwnProperty("mode")?t.mode:438,this.start=t.hasOwnProperty("start")?t.start:void 0,this.end=t.hasOwnProperty("start")?t.end:void 0,this.pos=void 0,void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw Error("start must be <= end");this.pos=this.start}"number"!=typeof this.fd&&this.open(),this.on("end",function(){this.destroy()})}function y(e,t){if(!(this instanceof y))return new y(e,t);if(t=L._extend({bufferSize:65536,lowWaterMark:16384,highWaterMark:65536},t||{}),E.call(this,t),this.path=e,this.fd=null,this.fd=t.hasOwnProperty("fd")?t.fd:null,this.flags=t.hasOwnProperty("flags")?t.flags:"w",this.mode=t.hasOwnProperty("mode")?t.mode:438,this.start=t.hasOwnProperty("start")?t.start:void 0,this.pos=void 0,this.bytesWritten=0,void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(0>this.start)throw Error("start must be >= zero");this.pos=this.start}"number"!=typeof this.fd&&this.open(),this.once("finish",this.close)}function b(e){M.call(this),this.fd=e,this.writable=!0,this.readable=!1}var L=e("util"),_=e("path"),C=process.binding("fs"),w=process.binding("constants"),x=t,M=e("stream").Stream,z=e("events").EventEmitter,S=e("./lib/_stream_readable.js"),E=e("./lib/_stream_writable.js"),k=128,T=40960,O=w.O_APPEND||0,P=w.O_CREAT||0;w.O_DIRECTORY||0;var B=w.O_EXCL||0;w.O_NOCTTY||0,w.O_NOFOLLOW||0;var D=w.O_RDONLY||0,A=w.O_RDWR||0;w.O_SYMLINK||0;var j=w.O_SYNC||0,I=w.O_TRUNC||0,R=w.O_WRONLY||0,N="win32"===process.platform,F=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);x.Stats=C.Stats,x.Stats.prototype._checkModeProperty=function(e){return(this.mode&w.S_IFMT)===e},x.Stats.prototype.isDirectory=function(){return this._checkModeProperty(w.S_IFDIR)},x.Stats.prototype.isFile=function(){return this._checkModeProperty(w.S_IFREG)},x.Stats.prototype.isBlockDevice=function(){return this._checkModeProperty(w.S_IFBLK)},x.Stats.prototype.isCharacterDevice=function(){return this._checkModeProperty(w.S_IFCHR)},x.Stats.prototype.isSymbolicLink=function(){return this._checkModeProperty(w.S_IFLNK)},x.Stats.prototype.isFIFO=function(){return this._checkModeProperty(w.S_IFIFO)},x.Stats.prototype.isSocket=function(){return this._checkModeProperty(w.S_IFSOCK)},x.exists=function(e,t){function n(e){t&&t(e?!1:!0)}s(e,n)&&C.stat(_._makeLong(e),n)},x.existsSync=function(e){try{return s(e),C.stat(_._makeLong(e)),!0}catch(t){return!1}},x.readFile=function(e,t){function n(){0===c?(u=new Buffer(8192),x.read(d,u,0,8192,-1,r)):x.read(d,u,p,c-p,-1,r)}function r(e,t){return e?x.close(d,function(){return l(e)}):0===t?s():(p+=t,0!==c?p===c?s():n():(h.push(u.slice(0,t)),n()),void 0)}function s(){x.close(d,function(e){return 0===c?u=Buffer.concat(h,p):c>p&&(u=u.slice(0,p)),o&&(u=u.toString(o)),l(e,u)})}var o="string"==typeof t?t:null,l=i(arguments[arguments.length-1]);a(o);var c,u,h,d,p=0;x.open(e,w.O_RDONLY,438,function(e,t){return e?l(e):(d=t,x.fstat(d,function(e,t){return e?l(e):(c=t.size,0===c?(h=[],n()):(u=new Buffer(c),n(),void 0))}),void 0)})},x.readFileSync=function(e,t){a(t);var n,i=x.openSync(e,w.O_RDONLY,438),r=!0;try{n=x.fstatSync(i).size,r=!1}finally{r&&x.closeSync(i)}var s,o,l=0;0===n?o=[]:s=new Buffer(n);for(var c=!1;!c;){var r=!0;try{if(0!==n)var u=x.readSync(i,s,l,n-l);else{s=new Buffer(8192);var u=x.readSync(i,s,0,8192);u&&o.push(s.slice(0,u))}r=!1}finally{r&&x.closeSync(i)}l+=u,c=0===u||0!==n&&l>=n}return x.closeSync(i),0===n?s=Buffer.concat(o,l):n>l&&(s=s.slice(0,l)),t&&(s=s.toString(t)),s},Object.defineProperty(t,"_stringToFlags",{enumerable:!1,value:o}),x.close=function(e,t){C.close(e,r(t))},x.closeSync=function(e){return C.close(e)},x.open=function(e,t,n,i){i=r(arguments[arguments.length-1]),n=l(n,438),s(e,i)&&C.open(_._makeLong(e),o(t),n,i)},x.openSync=function(e,t,n){return n=l(n,438),s(e),C.open(_._makeLong(e),o(t),n)},x.read=function(e,t,n,i,r,s){function o(e,n){s&&s(e,n||0,t)}if(!Buffer.isBuffer(t)){var l=arguments[4],c=arguments[3];a(c),r=arguments[2],i=arguments[1],t=new Buffer(i),n=0,s=function(e,n){if(l){var i=n>0?t.toString(c,0,n):"";l(e,i,n)}}}C.read(e,t,n,i,r,o)},x.readSync=function(e,t,n,i,r){var s=!1;if(!Buffer.isBuffer(t)){s=!0;var o=arguments[3];a(o),r=arguments[2],i=arguments[1],t=new Buffer(i),n=0}var l=C.read(e,t,n,i,r);if(!s)return l;var c=l>0?t.toString(o,0,l):"";return[c,l]},x.write=function(e,t,n,r,s,o){function l(e,n){o(e,n||0,t)}return Buffer.isBuffer(t)||(o=arguments[4],s=arguments[2],a(arguments[3]),t=new Buffer(""+arguments[1],arguments[3]),n=0,r=t.length),r?(o=i(o),C.write(e,t,n,r,s,l),void 0):("function"==typeof o&&process.nextTick(function(){o(void 0,0)}),void 0)},x.writeSync=function(e,t,n,i,r){return Buffer.isBuffer(t)||(r=arguments[2],a(arguments[3]),t=new Buffer(""+arguments[1],arguments[3]),n=0,i=t.length),i?C.write(e,t,n,i,r):0},x.rename=function(e,t,n){n=r(n),s(e,n)&&s(t,n)&&C.rename(_._makeLong(e),_._makeLong(t),n)},x.renameSync=function(e,t){return s(e),s(t),C.rename(_._makeLong(e),_._makeLong(t))},x.truncate=function(e,t,n){return"number"==typeof e?x.ftruncate(e,t,n):("function"==typeof t?(n=t,t=0):t===void 0&&(t=0),n=i(n),x.open(e,"w",function(e,i){return e?n(e):(C.ftruncate(i,t,function(e){x.close(i,function(t){n(e||t)})}),void 0)}),void 0)},x.truncateSync=function(e,t){if("number"==typeof e)return x.ftruncateSync(e,t);t===void 0&&(t=0);var n=x.openSync(e,"w");try{var i=x.ftruncateSync(n,t)}finally{x.closeSync(n)}return i},x.ftruncate=function(e,t,n){"function"==typeof t?(n=t,t=0):t===void 0&&(t=0),C.ftruncate(e,t,r(n))},x.ftruncateSync=function(e,t){return t===void 0&&(t=0),C.ftruncate(e,t)},x.rmdir=function(e,t){t=r(t),s(e,t)&&C.rmdir(_._makeLong(e),t)},x.rmdirSync=function(e){return s(e),C.rmdir(_._makeLong(e))},x.fdatasync=function(e,t){C.fdatasync(e,r(t))},x.fdatasyncSync=function(e){return C.fdatasync(e)},x.fsync=function(e,t){C.fsync(e,r(t))},x.fsyncSync=function(e){return C.fsync(e)},x.mkdir=function(e,t,n){"function"==typeof t&&(n=t),n=r(n),s(e,n)&&C.mkdir(_._makeLong(e),l(t,511),n)},x.mkdirSync=function(e,t){return s(e),C.mkdir(_._makeLong(e),l(t,511))},x.sendfile=function(e,t,n,i,a){C.sendfile(e,t,n,i,r(a))},x.sendfileSync=function(e,t,n,i){return C.sendfile(e,t,n,i)},x.readdir=function(e,t){t=r(t),s(e,t)&&C.readdir(_._makeLong(e),t)},x.readdirSync=function(e){return s(e),C.readdir(_._makeLong(e))},x.fstat=function(e,t){C.fstat(e,r(t))},x.lstat=function(e,t){t=r(t),s(e,t)&&C.lstat(_._makeLong(e),t)},x.stat=function(e,t){t=r(t),s(e,t)&&C.stat(_._makeLong(e),t)},x.fstatSync=function(e){return C.fstat(e)},x.lstatSync=function(e){return s(e),C.lstat(_._makeLong(e))},x.statSync=function(e){return s(e),C.stat(_._makeLong(e))},x.readlink=function(e,t){t=r(t),s(e,t)&&C.readlink(_._makeLong(e),t)},x.readlinkSync=function(e){return s(e),C.readlink(_._makeLong(e))},x.symlink=function(e,t,n,i){var a="string"==typeof n?n:null,i=r(arguments[arguments.length-1]);s(e,i)&&s(t,i)&&C.symlink(c(e,a),_._makeLong(t),a,i)},x.symlinkSync=function(e,t,n){return n="string"==typeof n?n:null,s(e),s(t),C.symlink(c(e,n),_._makeLong(t),n)},x.link=function(e,t,n){n=r(n),s(e,n)&&s(t,n)&&C.link(_._makeLong(e),_._makeLong(t),n)},x.linkSync=function(e,t){return s(e),s(t),C.link(_._makeLong(e),_._makeLong(t))},x.unlink=function(e,t){t=r(t),s(e,t)&&C.unlink(_._makeLong(e),t)},x.unlinkSync=function(e){return s(e),C.unlink(_._makeLong(e))},x.fchmod=function(e,t,n){C.fchmod(e,l(t),r(n))},x.fchmodSync=function(e,t){return C.fchmod(e,l(t))},w.hasOwnProperty("O_SYMLINK")&&(x.lchmod=function(e,t,n){n=i(n),x.open(e,w.O_WRONLY|w.O_SYMLINK,function(e,i){return e?(n(e),void 0):(x.fchmod(i,t,function(e){x.close(i,function(t){n(e||t)})}),void 0)})},x.lchmodSync=function(e,t){var n,i,r=x.openSync(e,w.O_WRONLY|w.O_SYMLINK);try{var a=x.fchmodSync(r,t)}catch(s){n=s}try{x.closeSync(r)}catch(s){i=s}if(n||i)throw n||i;return a}),x.chmod=function(e,t,n){n=r(n),s(e,n)&&C.chmod(_._makeLong(e),l(t),n)},x.chmodSync=function(e,t){return s(e),C.chmod(_._makeLong(e),l(t))},w.hasOwnProperty("O_SYMLINK")&&(x.lchown=function(e,t,n,r){r=i(r),x.open(e,w.O_WRONLY|w.O_SYMLINK,function(e,i){return e?(r(e),void 0):(x.fchown(i,t,n,r),void 0)})},x.lchownSync=function(e,t,n){var i=x.openSync(e,w.O_WRONLY|w.O_SYMLINK);return x.fchownSync(i,t,n)}),x.fchown=function(e,t,n,i){C.fchown(e,t,n,r(i))},x.fchownSync=function(e,t,n){return C.fchown(e,t,n)},x.chown=function(e,t,n,i){i=r(i),s(e,i)&&C.chown(_._makeLong(e),t,n,i)},x.chownSync=function(e,t,n){return s(e),C.chown(_._makeLong(e),t,n)},x._toUnixTimestamp=u,x.utimes=function(e,t,n,i){i=r(i),s(e,i)&&C.utimes(_._makeLong(e),u(t),u(n),i)},x.utimesSync=function(e,t,n){s(e),t=u(t),n=u(n),C.utimes(_._makeLong(e),t,n)},x.futimes=function(e,t,n,i){t=u(t),n=u(n),C.futimes(e,t,n,r(i))},x.futimesSync=function(e,t,n){t=u(t),n=u(n),C.futimes(e,t,n)},x.writeFile=function(e,t,n,r){var s="string"==typeof n?n:"utf8";a(s),r=i(arguments[arguments.length-1]),x.open(e,"w",438,function(e,n){if(e)r&&r(e);else{var i=Buffer.isBuffer(t)?t:new Buffer(""+t,s);h(n,i,0,i.length,0,r)}})},x.writeFileSync=function(e,t,n){a(n);var i=x.openSync(e,"w");Buffer.isBuffer(t)||(t=new Buffer(""+t,n||"utf8"));var r=0,s=t.length;try{for(;s>r;)r+=x.writeSync(i,t,r,s-r,r)}finally{x.closeSync(i)}},x.appendFile=function(e,t,n,r){var s="string"==typeof n?n:"utf8";a(s),r=i(arguments[arguments.length-1]),x.open(e,"a",438,function(e,n){if(e)return r(e);var i=Buffer.isBuffer(t)?t:new Buffer(""+t,s);h(n,i,0,i.length,null,r)})},x.appendFileSync=function(e,t,n){a(n);var i=x.openSync(e,"a");Buffer.isBuffer(t)||(t=new Buffer(""+t,n||"utf8"));var r=0,s=null,o=t.length;try{for(;o>r;)r+=x.writeSync(i,t,r,o-r,s),s+=r}finally{x.closeSync(i)}},L.inherits(p,z),p.prototype.start=function(e,t){s(e);var n=this._handle.start(_._makeLong(e),t);if(n)throw this._handle.close(),d(errno,"watch")},p.prototype.close=function(){this._handle.close()},x.watch=function(e){s(e);var t,n,i;return"object"==typeof arguments[1]?(n=arguments[1],i=arguments[2]):(n={},i=arguments[1]),void 0===n.persistent&&(n.persistent=!0),t=new p,t.start(e,n.persistent),i&&t.addListener("change",i),t},L.inherits(g,z),g.prototype.start=function(e,t,n){s(e),this._handle.start(_._makeLong(e),t,n)},g.prototype.stop=function(){this._handle.stop()};var q={};if(x.watchFile=function(e){s(e);var t,n,i={interval:5007,persistent:!0};if("object"==typeof arguments[1]?(i=L._extend(i,arguments[1]),n=arguments[2]):n=arguments[1],!n)throw Error("watchFile requires a listener function");return m(e)?t=q[e]:(t=q[e]=new g,t.start(e,i.persistent,i.interval)),t.addListener("change",n),t},x.unwatchFile=function(e,t){if(s(e),m(e)){var n=q[e];"function"==typeof t?n.removeListener("change",t):n.removeAllListeners("change"),0===n.listeners("change").length&&(n.stop(),q[e]=void 0)}},_.normalize,N)var W=/(.*?)(?:[\/\\]+|$)/g;else var W=/(.*?)(?:[\/]+|$)/g;if(N)var V=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else var V=/^[\/]*/;x.realpathSync=function(e,t){function n(){var t=V.exec(e);i=t[0].length,r=t[0],a=t[0],s="",N&&!c[a]&&(x.lstatSync(a),c[a]=!0)}if(e=_.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var i,r,a,s,o=e,l={},c={};for(n();e.length>i;){W.lastIndex=i;var u=W.exec(e);if(s=r,r+=u[0],a=s+u[1],i=W.lastIndex,!(c[a]||t&&t[a]===a)){var h;if(t&&Object.prototype.hasOwnProperty.call(t,a))h=t[a];else{var d=x.lstatSync(a);if(!d.isSymbolicLink()){c[a]=!0,t&&(t[a]=a);continue}var p=null;if(!N){var g=d.dev.toString(32)+":"+d.ino.toString(32);l.hasOwnProperty(g)&&(p=l[g])}null===p&&(x.statSync(a),p=x.readlinkSync(a)),h=_.resolve(s,p),t&&(t[a]=h),N||(l[g]=p)}e=_.resolve(h,e.slice(i)),n()}}return t&&(t[o]=e),e},x.realpath=function(e,t,n){function r(){var t=V.exec(e);c=t[0].length,u=t[0],h=t[0],d="",N&&!m[h]?x.lstat(h,function(e){return e?n(e):(m[h]=!0,a(),void 0)}):process.nextTick(a)}function a(){if(c>=e.length)return t&&(t[p]=e),n(null,e);W.lastIndex=c;var i=W.exec(e);return d=u,u+=i[0],h=d+i[1],c=W.lastIndex,m[h]||t&&t[h]===h?process.nextTick(a):t&&Object.prototype.hasOwnProperty.call(t,h)?l(t[h]):x.lstat(h,s)}function s(e,i){if(e)return n(e);if(!i.isSymbolicLink())return m[h]=!0,t&&(t[h]=h),process.nextTick(a);if(!N){var r=i.dev.toString(32)+":"+i.ino.toString(32);if(g.hasOwnProperty(r))return o(null,g[r],h)}x.stat(h,function(e){return e?n(e):(x.readlink(h,function(e,t){N||(g[r]=t),o(e,t)}),void 0)})}function o(e,i,r){if(e)return n(e);var a=_.resolve(d,i);t&&(t[r]=a),l(a)}function l(t){e=_.resolve(t,e.slice(c)),r()}if("function"!=typeof n&&(n=i(t),t=null),e=_.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var c,u,h,d,p=e,g={},m={};r()};var H;x.createReadStream=function(e,t){return new v(e,t)},L.inherits(v,S),x.ReadStream=v,x.FileReadStream=x.ReadStream,v.prototype.open=function(){var e=this;x.open(this.path,this.flags,this.mode,function(t,n){return t?(e.destroy(),e.emit("error",t),void 0):(e.fd=n,e.emit("open",n),e.read(),void 0)})},v.prototype._read=function(e,t){function n(e,n){if(e)return s.destroy(),t(e);var r=null;n>0&&(r=i.slice(a,a+n)),t(null,r)}if("number"!=typeof this.fd)return this.once("open",function(){this._read(e,t)});if(!this.destroyed){(!H||k>H.length-H.used)&&(H=null,f());var i=H,r=Math.min(H.length-H.used,e),a=H.used;if(void 0!==this.pos&&(r=Math.min(this.end-this.pos+1,r)),0>=r)return t();var s=this;x.read(this.fd,H,H.used,r,this.pos,n),void 0!==this.pos&&(this.pos+=r),H.used+=r}},v.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,"number"==typeof this.fd&&this.close())},v.prototype.close=function(e){function t(){x.close(n.fd,function(e){e?n.emit("error",e):n.emit("close")})}if(e&&this.once("close",e),this.closed||"number"!=typeof this.fd)return"number"!=typeof this.fd&&this.once("open",t),process.nextTick(this.emit.bind(this,"close"));this.closed=!0;var n=this;t()},x.createWriteStream=function(e,t){return new y(e,t)},L.inherits(y,E),x.WriteStream=y,x.FileWriteStream=x.WriteStream,y.prototype.open=function(){x.open(this.path,this.flags,this.mode,function(e,t){return e?(this.destroy(),this.emit("error",e),void 0):(this.fd=t,this.emit("open",t),void 0)}.bind(this))},y.prototype._write=function(e,t){return Buffer.isBuffer(e)?"number"!=typeof this.fd?this.once("open",this._write.bind(this,e,t)):(x.write(this.fd,e,0,e.length,this.pos,function(e,n){return e?(this.destroy(),t(e)):(this.bytesWritten+=n,t(),void 0)}.bind(this)),void 0!==this.pos&&(this.pos+=e.length),void 0):this.emit("error",Error("Invalid data"))},y.prototype.destroy=v.prototype.destroy,y.prototype.close=v.prototype.close,y.prototype.destroySoon=y.prototype.end,L.inherits(b,M),x.SyncWriteStream=b,b.prototype.write=function(e,t,n){var i,r;if(t)if("string"==typeof t)i=t,r=n;else{if("function"!=typeof t)throw Error("bad arg");r=t}return a(i),"string"==typeof e&&(e=new Buffer(e,i)),x.writeSync(this.fd,e,0,e.length),r&&process.nextTick(r),!0},b.prototype.end=function(e,t,n){e&&this.write(e,t,n),this.destroy()},b.prototype.destroy=function(){return x.closeSync(this.fd),this.fd=null,this.emit("close"),!0},b.prototype.destroySoon=b.prototype.destroy}});