montageDefine("e47202a","observers",{dependencies:["collections/shim","collections/listen/property-changes","collections/listen/array-changes","collections/sorted-array","collections/sorted-set","collections/map","collections/set","collections/heap","./scope","./operators","./parse","./compile-observer","./merge"],factory:function(t,e){function n(t){return function(e){return e(t)||Function.noop}}function i(t,e){return t(e.value)||Function.noop}function a(t,e){return t(e.parameters)||Function.noop}function r(t){return function(e,n){return e(n.document.getElementById(t))||Function.noop}}function s(t,e){return function(n,i){var a=i.components,r=a.getObjectByLabel||a.getComponentByLabel,s=r.call(a,t);return e.component=s,n(s)||Function.noop}}function o(t,e,n,i){function a(t,e,i){r(),r=n(t,e,i)||Function.noop}if(null==t)return n();var r=Function.noop;return be.addOwnPropertyChangeListener(t,e,a,i.beforeChange),a(t[e],e,t),ye(function(){r(),be.removeOwnPropertyChangeListener(t,e,a,i.beforeChange)})}function l(t,e){return function(n,i){return e(Le(function(e){return null==e?n():t(Le(function(t){return null==t?n():t.observeProperty?t.observeProperty(e,n,i):Se(t,e,n,i)}),i)}),i)}}function c(t,e,n,i){function a(t,i,a){s(e,i)&&(r(),r=n(t,e,a)||Function.noop)}var r=Function.noop,s=t.contentEquals||Object.equals;return a(t.get(e),e,t),t.addMapChangeListener(a,i.beforeChange),ye(function(){r(),t.removeMapChangeListener(a)})}function u(t,e){return function(n,i){return t(Le(function(t){return t?e(Le(function(e){return null==e?n():t.observeGet?t.observeGet(e,n,i):Ee(t,e,n,i)}),i):n()}),i)}}function h(t,e){return function(n,i){return n=fe(n),e(Le(function(e){return t(Le(function(t){return t?X(t,function(){return n((t.has||t.contains).call(t,e))},i):n()}),i)}),i)}}function d(t){return function(e,n){for(var i=Array(t.length),a=0;t.length>a;a++)i[a]=void 0;var r=t.map(function(t,e){return t(function(t){i.set(e,t)},n)}),s=e(i)||Function.noop;return ye(function(){s(),ve(r)})}}function p(t){return function(e,n){var i={},a={};for(var r in t)(function(t,e){i[t]=e(function(e){a[t]=e},n)})(r,t[r]);var s=e(a)||Function.noop;return function(){s();for(var t in i)i[t]()}}}function g(){return d(Array.prototype.slice.call(arguments))}function m(t){return function(){var e=d(Array.prototype.slice.call(arguments)),n=te(e);return function(e,i){return n(Le(function(n){return n.every(ze.defined)?e(t.apply(void 0,n)):e()}),i)}}}function f(t){var e=t.slice(0,1).toUpperCase()+t.slice(1),n="make"+e+"Observer",i="observe"+e;return function(){var e=arguments[0],a=Array.prototype.slice.call(arguments,1),r=a.map(function(t){return function(e,n){return t(Le(e),n)}}),s=d(a),o=te(s);return function(a,s){return e(Le(function(e){return e?e[n]?e[n].apply(e,r)(a,s):e[i]?e[i](a,s):o(Le(function(n){return n.every(ze.defined)?"function"==typeof e[t]?a(e[t].apply(e,n)):a():a()}),s):a()}),s)}}}function v(t){return function(e,n){return t(Le(function(t){return e(!t)}),n)}}function L(t,e){return function(n,i){return t(Le(function(t){return t?e(n,i):n(t)}),i)}}function y(t,e){return function(n,i){return t(Le(function(t){return t?n(t):e(n,i)}),i)}}function b(t,e,n){return function(i,a){return t(Le(function(t){return null==t?i():t?e(i,a):n(i,a)}),a)}}function C(t){return function(e,n){return t(Le(function(t){return e(null!=t)}),n)}}function _(t,e){return function(n,i){return t(Le(function(t){return null==t?e(n,i):n(t)}),i)}}function w(t,e){return function(n,i){return t(Le(function(t){function a(e){for(;t.length>e;e++)o[e].index=e}function r(t,n,r){o.swap(r,n.length,t.map(function(t,e){return{index:r+e}})),a(r+t.length);var c,u=[];ve(l.swap(r,n.length,t.map(function(t,n){var a=o[r+n];return e(Le(function(t){c?s.set(a.index,t):u[n]=t}),Me.nest(i,t))}))),c=!0,s.swap(r,n.length,u)}if(!t)return n();var s=[],o=[],l=[],c=X(t,r,i),u=n(s,t)||Function.noop;return ye(function(){u(),ve(l),c()})}),i)}}function x(t,e){var n=w(t,e);return function(t,e){return n(Le(function(n,i){function a(t){for(;n.length>t;t++)l[t+1]=l[t]+n[t]}function r(t,e,n){var r=i.slice(n,n+t.length),o=e.map(Boolean).sum(),c=r.filter(function(e,n){return t[n]}),u=l[n],h=s.slice(u,u+o);(h.length!==c.length||h.every(function(t,e){return t!==c[e]}))&&s.swap(u,o,c),a(u)}if(!i)return t();var s=[],o=[],l=[0],c=X(n,r,e),u=t(s)||Function.noop;return ye(function(){u(),ve(o),c()})}),e)}}function M(t,e){var n=E(e),i=w(t,n),a=function(t,e){return i(Le(function(n){function i(t,e){r.addEach(t),r.deleteEach(e)}if(!n)return t();var a=[],r=Ce(a,z,S),s=X(n,i,e),o=t(a)||Function.noop;return function(){o(),s()}}),e)};return Te(a,se)}function z(t,e){return Object.equals(t[1],e[1])}function S(t,e){return Object.compare(t[1],e[1])}function E(t){return function(e,n){return t(Le(function(t){return e([n.value,t])||Function.noop}),n)}}function T(t,e){var n=E(e),i=w(t,n),a=A(i,le),r=w(a,Z(le));return function(t,e){function n(t,e){return t=o.get(t),e=o.get(e),Object.compare(t,e)}function i(t,e){return t=o.get(t),e=o.get(e),Object.equals(t,e)}function a(t,e){e.forEach(function(t){l["delete"](t[0]),o["delete"](t[0])}),t.forEach(function(t){o.set(t[0],t[1]),l.add(t[0])})}function s(t){return l.clear(),X(t,a,e)}var o=new we,l=new _e(null,i,n),c=t(l)||Function.noop,u=r(s,e);return function(){c(),u()}}}function k(t){return function(e,n){return t(Le(function(t){function i(t,e,n){var i=a.length-n-e.length;a.swap(i,e.length,t.reversed())}if(!t)return e();var a=[],r=X(t,i,n),s=e(a);return ye(function(){s(),r()})}),n)}}function O(t){return function(e,n){return t(Le(function(t){function i(e){for(var n=e;t.length>n;n++)l[n].index=n,o[n+1]=t[n]?o[n]+t[n].length:o[n]}function a(t,e,a){var c=o[a],u=o[a+e.length],h=u-c;r.swap(c,h,[]),l.swap(a,e.length,t.map(function(){return{index:null}})),i(a),ve(s.swap(a,e.length,t.map(function(t,e){function s(t,e,n){i(c.index);var a=o[c.index]+n,s=o[c.index]+n+e.length,l=s-a;r.swap(a,l,t)}var c=l[a+e];return X(t,s,n)})))}if(!t)return e();var r=[],s=[],o=[0],l=[],c=X(t,a,n),u=e(r)||Function.noop;return ye(function(){u(),ve(s),c()})}),n)}}function P(){return Oe(d(Array.prototype.slice.call(arguments)))}function D(t,e){var n=ke(t,e),i=l(n,Pe);return he(i,Boolean)}function B(t,e){var n=he(e,ze.not),i=ke(t,n),a=l(i,Pe);return he(a,ze.not)}function A(t,e){var n=j(t,e);return Ae(n)}function j(t,e){var n=E(e),i=w(t,n);return function(t,e){return i(Le(function(n,i){function a(t,e){e.forEach(function(t){var e=r.get(t[1]);1===e.length?r["delete"](t[1]):e["delete"](t[0])}),t.forEach(function(t){var e,n=!r.has(t[1]);e=n?i.constructClone():r.get(t[1]),e.add(t[0]),n&&r.set(t[1],e)})}if(!n)return t();var r=we(),s=X(n,a,e),o=t(r)||Function.noop;return function(){s(),o()}}),e)}}function I(t,e,n){function i(t,e){return Object.compare(t[1],e[1])*n}var a=E(e),r=w(t,a);return function(t,e){return r(Le(function(n){function a(t,e){s.addEach(t),s.deleteEach(e)}function r(e,n){return 0===n?e?t(e[0]):t():void 0}if(!n)return t();var s=new xe(null,z,i),o=X(n,a,e),l=ne(s,r,e);return function(){o(),l()}}),e)}}function R(t,e){return I(t,e,1)}function N(t,e){return I(t,e,-1)}function F(t){return function(e){return function(n,i){return n=fe(n),e(Le(function(e){if(!e)return n();var a=t(e,n);return X(e,function(t,e,i){return n(a(t,e,i))},i)}),i)}}}function q(t){return"number"==typeof t&&!isNaN(t)}function V(t,e,n){return function(i,a){return t(Le(function(t){return t?n(Le(function(n){return null==n?i():e(Le(function(e){function r(i,a,r){var o=i.length-a.length;e>r&&0>o&&n>o?(s.swap(s.length,0,t.slice(e+n+o,e+n)),s.splice(0,-o)):e>r&&o>0&&n>o?(s.swap(0,0,t.slice(e,e+o)),s.splice(s.length-o,o)):r>=e&&0>o&&e+n>r?(s.swap(s.length,0,t.slice(e+n+o,e+n)),s.splice(r-e,-o)):r>=e&&o>0&&e+n>r?(s.swap(r-e,0,t.slice(r,r+o)),s.splice(s.length-o,o)):e+n>r&&s.swap(0,s.length,t.slice(e,e+n))}if(null==e)return i();var s=[],o=X(t,r,a),l=i(s)||Function.noop;return ye(function(){l(),o()})}),a)}),a):i()}),a)}}function W(t){return function(e,n){return t(Le(function(t){function i(t){for(;r.length>t;t++)r[t].set(0,t)}function a(t,e,n){r.swap(n,e.length,t.map(function(t,e){return[n+e,t]})),i(n+t.length)}if(!t)return e();var r=[],s=X(t,a,n),o=e(r)||Function.noop;return function(){o(),s()}}),n)}}function H(t){return function(e,n){var i=[],a=e(i)||Function.noop,r=t(function(t){if(t>>>=0,null==t)i.clear();else if(t>i.length){for(var e=[],n=i.length;t>n;n++)e.push(n);i.swap(i.length,0,e)}else i.length>t&&i.splice(t,i.length)},n);return function(){a(),r()}}}function U(t,e){return function(n,i){return e(function(e){var a=RegExp("^"+RegExp.escape(e));return t(function(t){return n(a.test(t))||Function.noop},i)},i)}}function Y(t,e){return function(n,i){return e(function(e){var a=RegExp(RegExp.escape(e)+"$");return t(function(t){return n(a.test(t))||Function.noop},i)},i)}}function G(t,e){return function(n,i){return e(function(e){var a=RegExp(RegExp.escape(e));return t(function(t){return n(a.test(t))||Function.noop},i)},i)}}function K(t,e){return e=e||De,function(n,i){return t(Le(function(t){return t?e(Le(function(e){function a(){r=n(t.join(e))||Function.noop}if("string"!=typeof e)return n()||Function.noop;var r=Function.noop,s=X(t,a,i);return function(){s(),r()}}),i):n()||Function.noop}),i)}}function X(t,e,n){function i(t,n,i){a(),a=e(t,n,i)||Function.noop}if(t){var a=Function.noop;if(t.toArray&&t.addRangeChangeListener){i(t.toArray(),[],0);var r=t.addRangeChangeListener(i,n.beforeChange);return ye(function(){a(),r()})}}}function Z(t){return function(e,n){return t(Le(function(t){return Be(t,e,n)}),n)}}function J(t,e,n){function i(n,i,o){if(a+=n.length-i.length,!(a>o+i.length&&a>o+n.length)){var l=0>a?null:t.get(a);r(),r=e(l)||Function.noop,s=l}}var a=-1,r=Function.noop,s=null,o=X(t,i,n);return function(){r(),o()}}function $(t){return function(e,n){return t(Le(fe(function(t){return Q(t,e,n)})),n)}}function Q(t,e,n){function i(n,i){return a+=n.length-i.length,1===a?e(t.only()):e()}var a=0;return X(t,i,n)}function te(t){return function(e,n){return t(Le(function(t){return t&&t.addRangeChangeListener?X(t,function(){return e(t)},n):e(t)}),n)}}function ee(t){return function(e,n){return t(Le(function(t){return t&&t.addMapChangeListener?ne(t,function(){return e(t)},n):e(t)}),n)}}function ne(t,e,n){function i(t,n,i){var r=a.get(n)||Function.noop;a["delete"](n),r(),r=e(t,n,i)||Function.noop,void 0===t?r():a.set(n,r)}if(t.addMapChangeListener){var a=new we;t.forEach(i);var r=t.addMapChangeListener(i,n.beforeChange);return ye(function(){a.forEach(function(t){t()}),r()})}}function ie(t){return function(e,n){return t(Le(function(t){return t?ae(t,e,n):e()}),n)}}function ae(t,e,n){function i(t,e){var n,i;r.has(e)?null==t?(n=r.get(e),r["delete"](e),i=a.indexOf(n),a.splice(i,1)):(n=r.get(e),n.set(1,t)):(n=[e,t],r.set(e,n),a.push(n))}var a=[],r=we(),s=e(a)||Function.noop,o=ne(t,i,n)||Function.noop;return ye(function(){s(),o()})}function re(t){var e=Ae(t);return Te(e,se)}function se(t,e){return e.value?t(e.value[0])||Function.noop:t()}function oe(t){var e=Ae(t);return Te(e,le)}function le(t,e){return e.value?t(e.value[1])||Function.noop:t()}function ce(t){return function(e,n){var i=new we,a=e(i)||Function.noop,r=t(Le(function(t){function e(t,e){void 0===t?i["delete"](e):i.set(e,t)}if(i.clear(),t&&"object"==typeof t){if(t.addRangeChangeListener)return je(Le(function(t){function e(t,e){e.forEach(function(t){i["delete"](t[0])}),t.forEach(function(t){i.set(t[0],t[1])})}return X(t,e,n)}),Me.nest(n,t));if(t.addMapChangeListener)return ne(t,e,n);var a=Object.keys(t).map(function(e){return Se(t,e,Le(function(t){void 0===t?i["delete"](e):i.set(e,t)}),n)});return function(){ve(a)}}}),n);return function(){a(),r()}}}function ue(t){return function(e,n){return t(e,n.parent||new Me)}}function he(t,e,n){return function(i,a){return i=fe(i),t(Le(function(t){return i(e.call(n,t))}),a)}}function de(t,e,n){return function(i,a){return i=fe(i),t(Le(function(t){return t&&t.every(ze.defined)?i(e.apply(n,t)):void 0}),a)}}function pe(e,n){var i=t("./parse"),a=t("./compile-observer");return function(t,r){return t=fe(t),n(Le(function(n){if(null==n)return t();var s,o;try{s=i(n),o=a(s)}catch(l){return t()}return e(Le(function(e){return o(t,Me.nest(r,e))}),r)}),r)}}function ge(t,e){return function(n,i){return t(Le(function(t){return e(Le(function(t){return n(t)}),Me.nest(i,t))}),i)}}function me(t){return function(){var e=t.apply(this,arguments);return function(t,n){var i=[],a=e(Le(function(t){function e(t,e,n){i.swap(n,e.length,t)}if(t){Ie(i,t);var a=t.addRangeChangeListener(e,n.beforeChange);return ye(a)}i.clear()}),n),r=t(i)||Function.noop;return ye(function(){a(),r()})}}}function fe(t){var e;return function(n){if(n!==e){var i=t.apply(this,arguments);return e=n,i}}}function ve(t){t.forEach(function(t){t&&t()})}function Le(t){var e=Function.noop;return function(){return e(),e=t.apply(this,arguments)||Function.noop,function(){e()}}}function ye(t){var e;return function(){return e?Function.noop:(e=!0,t.apply(this,arguments))}}t("collections/shim");var be=t("collections/listen/property-changes");t("collections/listen/array-changes");var Ce=t("collections/sorted-array"),_e=t("collections/sorted-set"),we=t("collections/map");t("collections/set");var xe=t("collections/heap"),Me=t("./scope"),ze=t("./operators");e.makeLiteralObserver=n,e.observeValue=i,e.observeParameters=a,e.makeElementObserver=r,e.makeComponentObserver=s,e.observeProperty=o;var Se=o;e.makePropertyObserver=l,e.observeKey=c,e.observeGet=c;var Ee=c;e.makeGetObserver=u,e.makeHasObserver=h,e.makeObserversObserver=d,e.makeRecordObserver=p,e.makeObjectObserver=p,e.makeTupleObserver=g,e.makeArrayObserver=g,e.makeOperatorObserverMaker=m,e.makeMethodObserverMaker=f,e.makeNotObserver=v,e.makeAndObserver=L,e.makeOrObserver=y,e.makeConditionalObserver=b,e.makeDefinedObserver=C,e.makeDefaultObserver=_;var Te=e.makeMapBlockObserver=me(w),ke=e.makeFilterBlockObserver=me(x);e.makeSortedBlockObserver=M,e.makeSortedSetBlockObserver=T,e.makeReversedObserver=me(k);var Oe=e.makeFlattenObserver=me(O);e.makeConcatObserver=P,e.makeSomeBlockObserver=D,e.makeEveryBlockObserver=B,e.makeGroupBlockObserver=A,e.makeGroupMapBlockObserver=j,e.makeMaxBlockObserver=R,e.makeMinBlockObserver=N;var Pe=n("length");e.makeSumObserver=F(function(){var t=0;return function(e,n){return e=e.filter(q),n=n.filter(q),t+=e.sum()-n.sum()}}),e.makeAverageObserver=F(function(){var t=0,e=0;return function(n,i){return n=n.filter(q),i=i.filter(q),t+=n.sum()-i.sum(),e+=n.length-i.length,t/e}}),e.makeViewObserver=me(V),e.makeEnumerateObserver=me(W),e.makeEnumerationObserver=e.makeEnumerateObserver,e.makeRangeObserver=H,e.makeStartsWithObserver=U,e.makeEndsWithObserver=Y,e.makeContainsObserver=G,e.makeJoinObserver=K;var De=n("");e.observeRangeChange=X,e.makeLastObserver=Z,e.observeLast=J;var Be=J;e.makeOnlyObserver=$,e.observeOnly=Q,e.makeRangeContentObserver=te,e.makeMapContentObserver=ee,e.observeMapChange=ne;var Ae=e.makeEntriesObserver=me(ie);e.observeEntries=ae,e.makeKeysObserver=re,e.observeEntryKey=se,e.makeValuesObserver=oe,e.observeEntryValue=le,e.makeToMapObserver=ce;var je=Te(A(i,se),Z(le));e.makeParentObserver=ue,e.makeConverterObserver=he,e.makeComputerObserver=de,e.makePathObserver=pe,e.makeExpressionObserver=pe,e.makeWithObserver=ge,e.makeToArrayObserver=me(Function.identity),e.makeAsArrayObserver=e.makeToArrayObserver;var Ie=t("./merge").merge;e.makeUniq=fe,e.cancelEach=ve,e.autoCancelPrevious=Le,e.once=ye}});