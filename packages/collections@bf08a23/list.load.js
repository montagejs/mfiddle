montageDefine("bf08a23","list",{dependencies:["./shim","./generic-collection","./generic-order","./listen/property-changes"],factory:function(t,e,n){"use strict";function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var a=this.head=new this.Node;a.next=a,a.prev=a,this.contentEquals=e||Object.equals,this.getDefault=n||Function.noop,this.length=0,this.addEach(t)}function a(t){this.head=t,this.at=t.next}function r(t){this.value=t,this.prev=null,this.next=null}n.exports=i,t("./shim");var s=t("./generic-collection"),o=t("./generic-order"),l=t("./listen/property-changes");Object.addEach(i.prototype,s.prototype),Object.addEach(i.prototype,o.prototype),Object.addEach(i.prototype,l.prototype),i.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.getDefault)},i.prototype.find=function(t,e){e=e||this.contentEquals;for(var n=this.head,i=n.next;i!==n;){if(e(i.value,t))return i;i=i.next}},i.prototype.findLast=function(t,e){e=e||this.contentEquals;for(var n=this.head,i=n.prev;i!==n;){if(e(i.value,t))return i;i=i.prev}},i.prototype.has=function(t,e){return!!this.find(t,e)},i.prototype.get=function(t,e){var n=this.find(t,e);return n?n.value:this.getDefault(t)},i.prototype["delete"]=function(t,e){var n=this.findLast(t,e);return n?(n["delete"](),this.length--,!0):!1},i.prototype.clear=function(){this.head.next=this.head.prev=this.head,this.length=0},i.prototype.add=function(t){return this.head.addBefore(new this.Node(t)),this.length++,!0},i.prototype.push=function(){for(var t=this.head,e=0;arguments.length>e;e++){var n=arguments[e],i=new this.Node(n);t.addBefore(i),this.length++}},i.prototype.unshift=function(){for(var t=this.head,e=0;arguments.length>e;e++){var n=arguments[e],i=new this.Node(n);t.addAfter(i),this.length++,t=i}},i.prototype.pop=function(){var t,e=this.head;return e.prev!==e&&(t=e.prev.value,e.prev["delete"](),this.length--),t},i.prototype.shift=function(){var t,e=this.head;return e.prev!==e&&(t=e.next.value,e.next["delete"](),this.length--),t},i.prototype.peek=function(){return this.head!==this.head.next?this.head.next.value:void 0},i.prototype.poke=function(t){this.head!==this.head.next?this.head.next.value=t:this.push(t)},i.prototype.one=function(){return this.peek()},i.prototype.scan=function(t,e){var n=this.head;if("number"==typeof t){var i=t;if(i>=0)for(t=n.next;i&&(i--,t=t.next,t!=n););else for(t=n;0>i&&(i++,t=t.prev,t!=n););return t}return t||e},i.prototype.slice=function(t,e){var n=[],i=this.head;for(t=this.scan(t,i.next),e=this.scan(e,i);t!==e&&t!==i;)n.push(t.value),t=t.next;return n},i.prototype.splice=function(t,e){return this.swap(t,e,Array.prototype.slice.call(arguments,2))},i.prototype.swap=function(t,e,n){var i=[],a=t;for(t=this.scan(t,this.head),void 0===e&&(e=1/0);e--&&e>=0&&t!==this.head;)i.push(t.value),t["delete"](),t=t.next,this.length--;if(n){null===a&&t===this.head&&(t=this.head.next);for(var r=0;n.length>r;r++){var s=new this.Node(n[r]);t.addBefore(s)}this.length+=n.length}return i},i.prototype.reverse=function(){var t=this.head;do{var e=t.next;t.next=t.prev,t.prev=e,t=t.next}while(t!==this.head);return this},i.prototype.reduce=function(t,e){for(var n=arguments[2],i=this.head,a=i.next;a!==i;)e=t.call(n,e,a.value,a,this),a=a.next;return e},i.prototype.reduceRight=function(t,e){for(var n=arguments[2],i=this.head,a=i.prev;a!==i;)e=t.call(n,e,a.value,a,this),a=a.prev;return e},i.prototype.iterate=function(){return new a(this.head)},a.prototype.next=function(){if(this.at===this.head)throw StopIteration;var t=this.at.value;return this.at=this.at.next,t},i.prototype.Node=r,r.prototype["delete"]=function(){this.prev.next=this.next,this.next.prev=this.prev},r.prototype.addBefore=function(t){var e=this.prev;this.prev=t,t.prev=e,e.next=t,t.next=this},r.prototype.addAfter=function(t){var e=this.next;this.next=t,t.next=e,e.prev=t,t.prev=this}}});