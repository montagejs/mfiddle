montageDefine("86ff290","lib/FeedHandler",{dependencies:["./index.js","util"],factory:function(e,t,n){function i(e){this.init(e,{ignoreWhitespace:!0})}function r(e,t){return c.getElementsByTagName(e,t,!0)}function a(e,t){return c.getElementsByTagName(e,t,!0,1)[0]}function s(e,t,n){return c.getText(c.getElementsByTagName(e,t,n,1))}var o=e("./index.js"),l=o.DomHandler,c=o.DomUtils;e("util").inherits(i,l),i.prototype.init=l;var u=function(e){return"rss"===e||"feed"===e||"rdf:RDF"===e};i.prototype.onend=function(){var e,t,n={},i=a(u,this.dom);i&&("feed"===i.name?(t=i.children,n.type="atom",(e=s("id",t))&&(n.id=e),(e=s("title",t))&&(n.title=e),(e=a("link",t))&&(e=e.attribs)&&(e=e.href)&&(n.link=e),(e=s("subtitle",t))&&(n.description=e),(e=s("updated",t))&&(n.updated=new Date(e)),(e=s("email",t,!0))&&(n.author=e),n.items=r("entry",t).map(function(e){var t,n={};return e=e.children,(t=s("id",e))&&(n.id=t),(t=s("title",e))&&(n.title=t),(t=a("link",e))&&(t=t.attribs)&&(t=t.href)&&(n.link=t),(t=s("summary",e))&&(n.description=t),(t=s("updated",e))&&(n.pubDate=new Date(t)),n})):(t=a("channel",i.children).children,n.type=i.name.substr(0,3),n.id="",(e=s("title",t))&&(n.title=e),(e=s("link",t))&&(n.link=e),(e=s("description",t))&&(n.description=e),(e=s("lastBuildDate",t))&&(n.updated=new Date(e)),(e=s("managingEditor",t))&&(n.author=e),n.items=r("item",i.children).map(function(e){var t,n={};return e=e.children,(t=s("guid",e))&&(n.id=t),(t=s("title",e))&&(n.title=t),(t=s("link",e))&&(n.link=t),(t=s("description",e))&&(n.description=t),(t=s("pubDate",e))&&(n.pubDate=new Date(t)),n}))),this.dom=n,l.prototype._handleCallback.call(this,i?null:Error("couldn't find root of feed"))},n.exports=i}});